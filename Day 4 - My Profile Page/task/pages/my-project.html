<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      .btn_addproject span {
        height: 0.8px;
        width: 100%;
        background: #000;
        flex: 1 25%;
        border-radius: 10px;
      }
      button {
        padding: 0.4rem 1rem;
        border: 1px solid #000;
        border-radius: 10px;
        cursor: pointer;
        background: transparent;
      }
      section {
        padding: 4.5rem 0;
      }
      .add_project {
        padding: 1rem;
      }
      .input input,
      select,
      textarea {
        width: 100%;
        padding: 0.4rem;
        border-radius: 7px;
        border: 1px solid #c4c4c4;
        margin: 5px 0 10px;
        resize: none;
      }
      .checkbox input {
        margin: 0.4rem;
      }
      .btn_addproject {
        margin: 1.5rem 0;
      }

      /* card project  */
      .container_project {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
      }
      .card_project {
        background: #eee;
        padding: 1rem;
        flex-direction: column;
        border-radius: 7px;
        cursor: pointer;
        justify-content: space-between;
      }
      .card_project img {
        object-fit: cover;
        width: 100%;
        height: 150px;
        border-radius: 7px;
      }
      .card_project .title {
        margin-top: 1rem;
      }
      .card_project .title span {
        font-size: 0.9rem;
      }
      .card_project .content {
        font-size: 0.85rem;
        margin-top: 1rem;
      }
      .card_project .tech {
        font-size: 2rem;
        margin: 1rem 0;
      }
      .card_project .action {
        margin-top: 0;
      }
      .card_project .action a {
        background: #000;
        color: white;
        width: 100%;
        padding: 0.4rem 1rem;
        border-radius: 7px;
      }

      .form-hidden {
        width: 100%;
        height: 0;
        overflow: hidden;
        margin-top: 1.5rem;
        transition: 0.3s;
      }
      .form-show {
        height: 480px !important;
      }
    </style>
    <link rel="stylesheet" href="../assets/css/style.css" />
    <!-- icon font awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    />
    <title>My Project</title>
  </head>
  <body>
    <!-- component navbar -->
    <header>
      <nav class="container">
        <div class="nav flex">
          <ul class="flex">
            <img
              src="../assets/img/logo.png"
              width="30"
              alt=""
              loading="lazy"
            />
            <li class=""><a href="../index.html">Home</a></li>
            <li class="active"><a href="./my-project.html">My Project</a></li>
          </ul>
          <a href="contact-me.html" class="contact">Contact Me</a>
        </div>
      </nav>
    </header>
    <!-- end navbar -->

    <!-- component project -->
    <section
      class="flex project"
      style="
        height: auto;
        justify-content: center;
        flex-direction: column;
        margin: auto;
        padding: 3rem auto;
      "
    >
      <div class="form-hidden">
        <div
          class="add_project"
          style="
            background: #ddd;
            width: 500px;
            border-radius: 10px;
            margin: auto;
          "
        >
          <form action="">
            <div class="input">
              <label for="name">Project Name</label>
              <input type="text" id="pname" />
            </div>
            <div
              class="flex input"
              style="justify-content: space-between; gap: 1rem"
            >
              <div style="width: 100%">
                <label for="sdate">Start Date</label>
                <input
                  type="text"
                  name="sdate"
                  id="sdate"
                  placeholder=""
                  onfocus="(type='date')"
                  onblur="if(value==''){type='text'}"
                />
              </div>
              <div style="width: 100%">
                <label for="edate">End Date</label>
                <input
                  type="text"
                  name="edate"
                  id="edate"
                  placeholder=""
                  onfocus="(type='date')"
                  onblur="if(value==''){type='text'}"
                />
              </div>
            </div>
            <div>
              <label for="desc">Description</label>
              <textarea id="desc" cols="30" rows="7"></textarea>
            </div>
            <div>
              <label for="tech">Technology</label>
              <div
                class="checkbox flex"
                style="justify-content: space-evenly; margin-top: 1rem"
              >
                <label for="node">
                  <input type="checkbox" name="node" id="node" />Node Js
                </label>
                <label for="react">
                  <input type="checkbox" name="react" id="react" />React Js
                </label>
                <label for="javascript">
                  <input
                    type="checkbox"
                    name="javascript"
                    id="javascript"
                  />Javascript
                </label>
                <label for="html">
                  <input type="checkbox" name="html" id="html" />HTML 5
                </label>
              </div>
            </div>

            <!-- input image -->
            <div style="margin-top: 1rem">
              <label for="file">
                <input type="file" name="file" id="file" accept="image/*" />
              </label>
            </div>

            <!-- button add -->
            <button
              type="button"
              id="submit"
              style="margin-top: 1rem; width: 100%"
              onclick="addProject()"
            >
              Add
            </button>
          </form>
        </div>
      </div>
      <div class="btn_addproject flex" style="width: 100%">
        <span></span>
        <button>Add Project</button>
        <span></span>
      </div>
      <div
        class="container"
        style="
          background: #ddd;
          width: 100%;
          border-radius: 8px;
          padding: 2rem 3rem 3rem;
        "
      >
        <h2 style="text-align: center">My Project</h2>
        <div class="container_project" style="margin-top: 1.5rem">
          <!-- card ke 1 -->
          <div class="card_project flex">
            <div style="width: 100%">
              <img
                src="../assets/img/portfolio1.gif"
                loading="lazy"
                alt="project"
              />
              <div class="title" style="width: 100%">
                <h3>Multimedia Web</h3>
                <span>pengerjaan 7 hari</span>
              </div>
              <div class="content" style="width: 100%">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Placeat
                ducimus distinctio optio nesciunt nihil dolore voluptatibus
                exercitationem magnam, ipsum maiores praesentium accusantium
                dolorum saepe, voluptas, suscipit iste maxime consequuntur
                laboriosam.
              </div>
            </div>
            <div style="width: 100%">
              <div class="tech" style="width: 100%">
                <i class="fa-brands fa-node"></i>
                <i class="fa-brands fa-react"></i>
                <i class="fa-brands fa-js"></i>
                <i class="fa-brands fa-html5"></i>
              </div>
              <div
                class="action flex"
                style="
                  width: 100%;
                  justify-content: space-between;
                  gap: 0.6rem;
                  text-align: center;
                "
              >
                <a href="#">edit</a>
                <a href="#">hapus</a>
              </div>
            </div>
          </div>

          <!-- card ke 2 -->
          <div class="card_project flex">
            <div style="width: 100%">
              <img
                src="../assets/img/portfolio3.gif"
                loading="lazy"
                alt="project"
              />
              <div class="title" style="width: 100%">
                <h3>3D Modeling Web</h3>
                <span>pengerjaan 3 hari</span>
              </div>
              <div class="content" style="width: 100%">
                Lorem ipsum dolor sit, amet consectetur adipisicing elit. Sequi,
              </div>
            </div>
            <div style="width: 100%">
              <div class="tech" style="width: 100%">
                <i class="fa-brands fa-node"></i>
                <i class="fa-brands fa-react"></i>
                <i class="fa-brands fa-html5"></i>
              </div>
              <div
                class="action flex"
                style="
                  width: 100%;
                  justify-content: space-between;
                  gap: 0.6rem;
                  text-align: center;
                "
              >
                <a href="#">edit</a>
                <a href="#">hapus</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <script>
      // data variable global
      let project = [];
      let showproject = document.querySelector(".container_project");

      // show form
      let form = document.querySelector(".form-hidden");
      let btnproject = document.querySelector(".btn_addproject");
      let cards = document.querySelector(".card_project");

      btnproject.onclick = () => {
        form.classList.toggle("form-show");
      };

      cards.onclick = () => {
        window.location.href = "./contact-me.html";
      };

      // function add project
      const addProject = () => {
        // data variable scope
        let pName = document.querySelector("#pname").value;
        let sDate = document.querySelector("#sdate").value;
        let eDate = document.querySelector("#edate").value;
        let desc = document.querySelector("#desc").value;
        let i1 = document.querySelector("#node").checked;
        let i2 = document.querySelector("#react").checked;
        let i3 = document.querySelector("#javascript").checked;
        let i4 = document.querySelector("#html").checked;
        let image = document.querySelector("#file").files;

        let icon1 = i1 ? `<i class="fa-brands fa-node"></i>` : ``;
        let icon2 = i2 ? `<i class="fa-brands fa-react"></i>` : ``;
        let icon3 = i3 ? `<i class="fa-brands fa-js"></i>` : ``;
        let icon4 = i4 ? `<i class="fa-brands fa-html5"></i>` : ``;

        image = URL.createObjectURL(image[0]);

        let icon = [icon1, icon2, icon3, icon4];
        console.log(icon);

        let dataProject = {
          pName,
          sDate,
          eDate,
          desc,
          image,
          icon,
        };

        project.push(dataProject);
        console.log(project);
        showData();
        let form = document.querySelector("form");
        form.reset();
      };

      const showData = () => {
        // jika ingin reset
        // showproject.innerHTML = ''

        let i = 0;
        for (let i of project) {
          showproject.innerHTML += `

          <div class="card_project flex">
           <div style="width: 100%;">

            <img src="${i.image}" />
            <div class="title" style="width: 100%">
              <h3>${i.pName}</h3>
              <span>pengerjaan ${duration(i.sDate, i.eDate)}</span>
            </div>
            <div class="content" style="width: 100%">
             ${i.desc}
            </div>
           </div>
            <div style="width: 100%;">
             <div class="tech" style="width: 100%">
             ${i.icon[0]}
             ${i.icon[1]}
             ${i.icon[2]}
             ${i.icon[3]}
             </div>
             <div
               class="action flex"
               style="
                 width: 100%;
                 justify-content: space-between;
                 gap: 0.6rem;
                 text-align: center;
               "
             >
               <a href="#">edit</a>
               <a href="#">hapus</a>
             </div>
            </div>
          </div>
       `;
          i++;
        }
      };

      // function duration
      const duration = (sDate, eDate) => {
        let selisih = new Date(eDate) - new Date(sDate);

        let day = Math.floor(selisih / (1000 * 60 * 60 * 24));
        let month = Math.floor(selisih / (1000 * 60 * 60 * 24 * 30));

        if (month > 0) {
          return `${month} Bulan`;
        } else {
          return `${day} Hari`;
        }
      };
    </script>
  </body>
</html>
